# netlify.toml â€” Build config, Security headers & CSP (enforced)

[build]
  command = "npm run build"
  publish = "."

# Redirects for renamed rate calculator pages (old Sizer URLs)
[[redirects]]
  from = "/loan-sizer.html"
  to = "/rate-calculator.html"
  status = 301

[[redirects]]
  from = "/flip-sizer.html"
  to = "/flip-rate-calculator.html"
  status = 301

[[headers]]
  for = "/*"
  [headers.values]
  Strict-Transport-Security = "max-age=63072000; includeSubDomains; preload"
  X-Content-Type-Options    = "nosniff"
  X-Frame-Options           = "DENY"
  Referrer-Policy           = "strict-origin-when-cross-origin"
  Permissions-Policy        = "geolocation=(), microphone=(), camera=()"

  Content-Security-Policy = """
    default-src 'self';
    base-uri 'self';
    object-src 'none';
    frame-ancestors 'none';
    form-action 'self' https://api.hsforms.com;

    script-src 'self'
      'unsafe-inline'
      https://www.googletagmanager.com
      https://assets.calendly.com;

    style-src 'self' 'unsafe-inline'
      https://fonts.googleapis.com
      https://assets.calendly.com;

    img-src 'self' https: data: blob:;

    font-src 'self' https://fonts.gstatic.com data:;

    connect-src 'self'
      https://api.hsforms.com
      https://www.google-analytics.com
      https://region1.google-analytics.com
      https://calendly.com;

    frame-src https://www.youtube.com https://youtu.be
      https://calendly.com;

    upgrade-insecure-requests;
  """
